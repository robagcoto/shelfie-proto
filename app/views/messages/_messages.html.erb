<% messages.each do |message| %>

  <% if message.role == "user" %>
    <div class="text-end my-3">
      <div class="d-inline-block px-3 py-1 bg-primary text-white" style="border-radius: 20px;">
        <p class="mb-1"><strong><%= message.role.capitalize %></strong></p>
        <%= simple_format(message.prompt) %>
      </div>
    </div>
  <% else %>
    <div class="text-start my-3">
      <div class="d-inline-block p-2 bg-light" style="border-radius: 20px;">
        <p class="mb-1"><strong><%= message.role.capitalize %></strong></p>
        <%= simple_format(begin
                            JSON.parse(message.prompt)["recipe_description"]
                          rescue => e
                            message.prompt
                          end) %>
      </div>
    </div>
  <% end %>
  <%= render "messages/message", message: message %>

<% end %>
